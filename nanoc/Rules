#!/usr/bin/env ruby
# coding: utf-8

class Nanoc::Context
  def offline_mode?; end  # FIXME: Generate two outputs.
end

module ::App
  NAME = 'ハトクランダム'
  CODENAME = 'Hatokurandom'
  GITHUB_REPOS_URI = 'https://github.com/kana/hatokurandom'
end

compile '/' do
  filter :haml
end

compile '/stylesheets/whole/' do
  # FIXME: Combine related files.
end




compile '*' do
  next if item.binary?
  next if item[:extension] == 'css'

  filter :erb
  layout 'default'
end

route '/' do
  '/index.html'
end

route '/stylesheets/whole/' do
  '/assets/whole.css'
end

route '*' do
  if item[:extension]
    item.identifier.chop + '.' + item[:extension]
  else
    item.identifier.chop
  end
end

layout '*', :erb
